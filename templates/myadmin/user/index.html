{% extends "myadmin/base.html" %}

{% block main_body %}
    <style>
        .box-title-with-form {
        overflow: auto;
        }

        .box-title {
            float: left;
        }

        form {
            float: right;
            margin-top: 7px;
        }
        .horizontal-pagination li {
          display: inline-block;
          margin: 0 5px;
        }
    </style>
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <blockquote class="layui-elem-quote layui-text">
            账号管理
        <span class="layui-breadcrumb" lay-separator=">" >
          <a href="">首页</a>
          <a href="" class="active">账号信息管理</a>
        </span>
        </blockquote>
    </section>

    <!-- Main content -->
    <section class="content container-fluid">
      <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
          <div class="layui-card">
            <div class="layui-card-header">
                <h4 class="box-title"><i class="fa fa-calendar"></i> 员工账号信息表</h4>
                <form action="{% url 'myadmin_user_index' 1 %}" method="get">
                <div class="layui-input-group">
                    <label>
                        <input type="text" placeholder="搜索......" class="layui-input" lay-options="{split:true}" id="searchInput">
                    </label>
                    <div class=" layui-input-suffix" style="cursor: pointer;background-color: #23292e"><!--class="layui-input-split"-->
                        <i class="layui-icon layui-icon-search" style="font-size: 15px;color: #fafafa" lay-affix="search" id="searchIcon" lay-event="search"></i>
                    </div>
                </div>
                </form>
            </div>
            <!-- /.card-header -->
            <div class="layui-card-body">
              <table class="layui-table">
                <tr>
                  <th>ID</th>
                  <th>员工账号</th>
                  <th>昵称</th>
                  <th>当前状态</th>
                  <th>添加时间</th>
                  <th>修改时间</th>
                  <th>操作</th>
                </tr>
                {% for vo in userlist %}
                <tr>
                  <td>{{ vo.id }}</td>
                  <td>{{ vo.username }}</td>
                  <td>{{ vo.nickname }}</td>
                  <td>
                    {% if vo.status == 1 %}
                      <span style="color:green">正常</span>
                    {% elif vo.status == 2 %}
                      <span style="color:red">禁停</span>
                    {% elif vo.status == 6 %}
                      <span style="color:red">管理员</span>
                    {% elif vo.status == 9 %}
                      <span style="color:red">已删除</span>
                    {% else %}
                      <span style="color:red">未知状态</span>
                    {% endif %}
                  </td>
                  <td width="15%">{{ vo.create_at|date:'Y-m-d H:i:s' }}</td>
                  <td width="15%">{{ vo.update_at|date:'Y-m-d H:i:s' }}</td>
                  <td width="22%">
                    <a href="{% url 'myadmin_user_edit' vo.id %}" class=" btn-success layui-btn layui-btn-xs">
                      <span class="glyphicon glyphicon-edit" aria-hidden="true"></span> 编辑</a>
                    <button type="button" onclick="doDelete('{% url 'myadmin_user_del' vo.id %}')" class="layui-btn btn-danger layui-btn-xs">
                      <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> 删除</button>
                    <a type="button" class="layui-btn btn-warning layui-btn-xs">
                      <span class="glyphicon glyphicon-search" aria-hidden="true"></span> 分配</a>
                  </td>
                </tr>
                {% endfor %}
              </table>
            </div>
            <!-- /.box-body -->
            <div class="layui-box">
                <div class="layui-container">
                    <div class="layui-row layui-col-space15">
                        <div class="layui-col-xs8">
                            <div class="layui-box">
                                <a role="button" href="{% url 'myadmin_user_add' %}" class="btn-primary layui-btn layui-btn-xs">
                                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 添加账户
                                </a>
                            </div>
                        </div>
                        <div class="layui-col-xs4">
                            <ul class="layui-laypage horizontal-pagination" id="pagination">
                                <li class="layui-laypage-prev">
                                    <a href="{% if pIndex > 1 %}{% url 'myadmin_user_index' pIndex|add:-1 %}{% else %}{% url 'myadmin_user_index' 1 %}{% endif %}">&laquo;</a>
                                </li>
                                {% for p in plist %}
                                    <li {% if p == pIndex %}class="layui-laypage-curr"{% endif %}>
                                        <a href="{% url 'myadmin_user_index' p %}">{{p}}</a>
                                    </li>
                                {% endfor %}
                                <li class="layui-laypage-next">
                                    <a href="{% url 'myadmin_user_index' pIndex|add:1 %}">&raquo;</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
          </div>
          <!-- /.box -->
        </div>
      </div>

    </section>
    <!-- /.content -->
{% endblock %}
